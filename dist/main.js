var __vite_style__=document.createElement("style");__vite_style__.innerHTML=`.mapboxgl-style-list{display:none}.mapboxgl-ctrl-group .mapboxgl-style-list button{background:none;border:none;cursor:pointer;display:block;font-size:14px;padding:8px 8px 6px;text-align:right;width:100%;height:auto}.mapboxgl-style-list button.active{font-weight:700}.mapboxgl-style-list button:hover{background-color:#0000000d}.mapboxgl-style-list button+button{border-top:1px solid #ddd}.mapboxgl-style-switcher{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNTQuODQ5cHgiIGhlaWdodD0iNTQuODQ5cHgiIHZpZXdCb3g9IjAgMCA1NC44NDkgNTQuODQ5IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1NC44NDkgNTQuODQ5OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PGc+PGc+PGc+PHBhdGggZD0iTTU0LjQ5NywzOS42MTRsLTEwLjM2My00LjQ5bC0xNC45MTcsNS45NjhjLTAuNTM3LDAuMjE0LTEuMTY1LDAuMzE5LTEuNzkzLDAuMzE5Yy0wLjYyNywwLTEuMjU0LTAuMTA0LTEuNzktMC4zMThsLTE0LjkyMS01Ljk2OEwwLjM1MSwzOS42MTRjLTAuNDcyLDAuMjAzLTAuNDY3LDAuNTI0LDAuMDEsMC43MTZMMjYuNTYsNTAuODFjMC40NzcsMC4xOTEsMS4yNTEsMC4xOTEsMS43MjksMEw1NC40ODgsNDAuMzNDNTQuOTY0LDQwLjEzOSw1NC45NjksMzkuODE3LDU0LjQ5NywzOS42MTR6Ii8+PHBhdGggZD0iTTU0LjQ5NywyNy41MTJsLTEwLjM2NC00LjQ5MWwtMTQuOTE2LDUuOTY2Yy0wLjUzNiwwLjIxNS0xLjE2NSwwLjMyMS0xLjc5MiwwLjMyMWMtMC42MjgsMC0xLjI1Ni0wLjEwNi0xLjc5My0wLjMyMWwtMTQuOTE4LTUuOTY2TDAuMzUxLDI3LjUxMmMtMC40NzIsMC4yMDMtMC40NjcsMC41MjMsMC4wMSwwLjcxNkwyNi41NiwzOC43MDZjMC40NzcsMC4xOSwxLjI1MSwwLjE5LDEuNzI5LDBsMjYuMTk5LTEwLjQ3OUM1NC45NjQsMjguMDM2LDU0Ljk2OSwyNy43MTYsNTQuNDk3LDI3LjUxMnoiLz48cGF0aCBkPSJNMC4zNjEsMTYuMTI1bDEzLjY2Miw1LjQ2NWwxMi41MzcsNS4wMTVjMC40NzcsMC4xOTEsMS4yNTEsMC4xOTEsMS43MjksMGwxMi41NDEtNS4wMTZsMTMuNjU4LTUuNDYzYzAuNDc3LTAuMTkxLDAuNDgtMC41MTEsMC4wMS0wLjcxNkwyOC4yNzcsNC4wNDhjLTAuNDcxLTAuMjA0LTEuMjM2LTAuMjA0LTEuNzA4LDBMMC4zNTEsMTUuNDFDLTAuMTIxLDE1LjYxNC0wLjExNiwxNS45MzUsMC4zNjEsMTYuMTI1eiIvPjwvZz48L2c+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvc3ZnPg==);background-position:center;background-repeat:no-repeat;background-size:70%}
`;document.head.appendChild(__vite_style__);(function(C){typeof define=="function"&&define.amd?define(C):C()})(function(){"use strict";function C(){const a=document.querySelector('[fs-cmsfilter-element="filters"]'),t=document.querySelector('[fs-cmsfilter-element="list"]');if(!a||!t)return;const e=document.querySelectorAll('input[type="checkbox"]'),s=document.querySelectorAll(".location-map_card-wrap"),o=new Map;function r(){const i=new Map;return e.forEach(n=>{var M,d,y,m,f,h;if(n.checked){const v=(y=(d=(M=n.parentElement)==null?void 0:M.querySelector(".w-form-label"))==null?void 0:d.textContent)==null?void 0:y.trim(),w=((h=(f=(m=n.closest("div"))==null?void 0:m.previousElementSibling)==null?void 0:f.textContent)==null?void 0:h.trim())||"default";v&&(i.has(w)||i.set(w,new Set),i.get(w).add(v))}}),i}function c(i){var y,m;if(o.has(i))return o.get(i);const n=[];i.querySelectorAll(".w-form-label").forEach(f=>{const h=f.textContent.trim();h&&n.push(h)});const d=(m=(y=i.querySelector(".contact-text"))==null?void 0:y.textContent)==null?void 0:m.trim();return d&&n.push(d),o.set(i,n),n}function l(){const i=r();if(i.size===0){s.forEach(n=>{n.style.display=""});return}s.forEach(n=>{const M=c(n),d=Array.from(i.entries()).every(([y,m])=>Array.from(m).some(h=>M.some(w=>w.toLowerCase()===h.toLowerCase())));n.style.display=d?"":"none"})}function L(){e.forEach(i=>{i.checked=!1}),l()}const S=document.querySelector(".clear-filters-button");S&&S.addEventListener("click",L),e.forEach(i=>{i.addEventListener("change",l)}),l()}function N(){try{j(),D()}catch{}}function j(){const a=document.getElementById("Listing_name"),t=document.getElementById("Business-Listing");if(a&&t){const e=a.textContent;t.value=e,t.disabled=!0}}function D(){const a=document.getElementById("listings_main"),t=document.getElementById("read-more-button");a&&t&&t.addEventListener("click",()=>{a.style.maxHeight==="none"?(a.style.maxHeight="50px",t.textContent="Read More"):(a.style.maxHeight="none",t.textContent="Read Less")})}var k={};Object.defineProperty(k,"__esModule",{value:!0});class p{constructor(t,e){this.styles=t||p.DEFAULT_STYLES;const s=typeof e=="string"?e:e?e.defaultStyle:void 0;this.defaultStyle=s||p.DEFAULT_STYLE,this.onDocumentClick=this.onDocumentClick.bind(this),this.events=typeof e!="string"&&e?e.eventListeners:void 0}getDefaultPosition(){return"top-right"}onAdd(t){this.map=t,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.mapStyleContainer=document.createElement("div"),this.styleButton=document.createElement("button"),this.styleButton.type="button",this.mapStyleContainer.classList.add("mapboxgl-style-list");for(const e of this.styles){const s=document.createElement("button");s.type="button",s.innerText=e.title,s.classList.add(e.title.replace(/[^a-z0-9-]/gi,"_")),s.dataset.uri=JSON.stringify(e.uri),s.addEventListener("click",o=>{const r=o.srcElement;if(this.closeModal(),r.classList.contains("active")||this.events&&this.events.onOpen&&this.events.onOpen(o))return;const c=JSON.parse(r.dataset.uri);this.map.setStyle(c);const l=this.mapStyleContainer.getElementsByClassName("active");for(;l[0];)l[0].classList.remove("active");r.classList.add("active"),this.events&&this.events.onChange&&this.events.onChange(o,c)}),e.title===this.defaultStyle&&s.classList.add("active"),this.mapStyleContainer.appendChild(s)}return this.styleButton.classList.add("mapboxgl-ctrl-icon"),this.styleButton.classList.add("mapboxgl-style-switcher"),this.styleButton.addEventListener("click",e=>{this.events&&this.events.onSelect&&this.events.onSelect(e)||this.openModal()}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.styleButton),this.controlContainer.appendChild(this.mapStyleContainer),this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.styleButton||(this.styleButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}closeModal(){this.mapStyleContainer&&this.styleButton&&(this.mapStyleContainer.style.display="none",this.styleButton.style.display="block")}openModal(){this.mapStyleContainer&&this.styleButton&&(this.mapStyleContainer.style.display="block",this.styleButton.style.display="none")}onDocumentClick(t){this.controlContainer&&!this.controlContainer.contains(t.target)&&this.closeModal()}}p.DEFAULT_STYLE="Streets",p.DEFAULT_STYLES=[{title:"Dark",uri:"mapbox://styles/mapbox/dark-v10"},{title:"Light",uri:"mapbox://styles/mapbox/light-v10"},{title:"Outdoors",uri:"mapbox://styles/mapbox/outdoors-v11"},{title:"Satellite",uri:"mapbox://styles/mapbox/satellite-streets-v11"},{title:"Streets",uri:"mapbox://styles/mapbox/streets-v11"}];var z=k.MapboxStyleSwitcherControl=p;const u=window.mapboxgl;class P{constructor(t){this.map=t}layerExists(t){return this.map.getLayer(t)!==void 0}safePaintProperty(t,e,s){return this.layerExists(t)?(this.map.setPaintProperty(t,e,s),!0):!1}safeLayoutProperty(t,e,s){return this.layerExists(t)?(this.map.setLayoutProperty(t,e,s),!0):!1}applyCustomStyling(){this.map.on("style.load",()=>{})}hideUnwantedLabels(){const t=this.map.getStyle().layers;for(const e of t)e.type==="symbol"&&(e.id.includes("poi")||e.id.includes("transit"))&&this.safeLayoutProperty(e.id,"visibility","none")}applyFadedTheme(){var t;this.map.getLayer("background")?this.map.setPaintProperty("background","background-opacity",.8):this.map.addLayer({id:"background",type:"background",paint:{"background-color":"#f8f8f8","background-opacity":.8}},(t=this.map.getStyle().layers[0])==null?void 0:t.id)}ensureVisibleElements(){["pedestrian","path","trail","road-label","transit","poi","place"].forEach(e=>{this.safeLayoutProperty(e,"visibility","visible")})}setLighting(){this.map.setLight({anchor:"viewport",color:"white",intensity:.4,position:[1.15,210,30]})}addFadeOverlay(){if(!this.layerExists("fade-overlay"))try{this.map.addLayer({id:"fade-overlay",type:"background",paint:{"background-color":"#ffffff","background-opacity":.2}})}catch{}}setupCountryZoom(t="NA"){this.map.addSource("country-boundaries",{type:"vector",url:"mapbox://mapbox.country-boundaries-v1",promoteId:"iso_3166_1"}),this.map.addLayer({id:"country-boundaries",type:"fill",source:"country-boundaries","source-layer":"country_boundaries",paint:{"fill-opacity":0},filter:["==",["get","iso_3166_1"],t]});const e=new u.LngLatBounds,s=o=>{if(o.sourceId!=="country-boundaries"||!this.map.isSourceLoaded("country-boundaries"))return;const r=this.map.querySourceFeatures("country-boundaries",{sourceLayer:"country_boundaries"});r.length>0&&(r.forEach(c=>{c.geometry&&c.geometry.coordinates&&c.geometry.coordinates.forEach(l=>{l.forEach(L=>{e.extend(L)})})}),this.map.fitBounds(e,{padding:{top:50,bottom:50,left:50,right:50},duration:1e3,maxZoom:12}),this.map.off("sourcedata",s))};this.map.on("sourcedata",s)}resetStyling(){this.layerExists("fade-overlay")&&this.map.removeLayer("fade-overlay"),this.layerExists("country-boundaries")&&this.map.removeLayer("country-boundaries"),this.map.getSource("country-boundaries")&&this.map.removeSource("country-boundaries")}}const g={accessToken:"pk.eyJ1IjoiYnJhbmR4IiwiYSI6ImNtZmR5dnFvYjAxMXIya3I5eG1rN3Nxc20ifQ.yna2pnOayMxz_3inlaHxww",style:"mapbox://styles/mapbox/streets-v12",minZoom:15,defaultMapSettings:{container:"map",style:"mapbox://styles/mapbox/streets-v12",center:[17.088,-22.574],zoom:15},markerColors:{user:"#FF0000",location:"#FF9900"},layerSettings:{id:"locations",paint:{"circle-radius":["interpolate",["linear"],["zoom"],10,6,15,12],"circle-stroke-width":1,"circle-color":"#FF9900","circle-opacity":.9,"circle-stroke-color":"#405F3B"}}};class x{static async getUserLocation(){const t={lng:17.080475533746686,lat:-22.573475211818067,isDefault:!0};return new Promise(e=>{if("geolocation"in navigator){const s=setTimeout(()=>{e(t)},5e3);navigator.geolocation.getCurrentPosition(o=>{clearTimeout(s),e({lng:o.coords.longitude,lat:o.coords.latitude,isDefault:!1})},o=>{clearTimeout(s),e(t)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}else e(t)})}static getGeoData(){const t=document.querySelectorAll("#location-list > *");return{type:"FeatureCollection",features:Array.from(t).map((e,s)=>({type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(e.querySelector("#locationLongitude").value),parseFloat(e.querySelector("#locationLatitude").value)]},properties:{id:e.querySelector("#locationID").value,description:e.querySelector(".locations-map_card").innerHTML,arrayID:s}}))}}}class I{constructor(t){this.map=t,this.markers=[],this.popup=null,this.mapLocations={type:"FeatureCollection",features:[]},this.initializePopup()}initializePopup(){this.popup=new u.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"auto",offset:40})}loadLocationData(){return this.mapLocations=x.getGeoData(),this.mapLocations}addUserLocationMarker(t){if(!t.isDefault){const e=new u.Marker({color:g.markerColors.user}).setLngLat([t.lng,t.lat]).addTo(this.map);this.markers.push({type:"user",marker:e,coordinates:[t.lng,t.lat]})}}addMapPoints(){this.clearMapPoints(),this.mapLocations.features.forEach((t,e)=>{this.createLocationMarker(t,e)})}createLocationMarker(t,e){const s=document.querySelectorAll("#location-list > *")[e],o=s==null?void 0:s.querySelector(".markericon img"),r=(o==null?void 0:o.src)||"https://cdn.prod.website-files.com/678d364888a0aa90f5f49e2c/678fb0a891ae9c935315e936_kitchen-utensils.svg";if(r.includes("placeholder.60f9b1840c.svg"))return;const c=document.createElement("div");c.className="markericon",c.style.backgroundImage=`url("${r}")`;const l=new u.Marker({element:c,anchor:"bottom"}).setLngLat(t.geometry.coordinates).addTo(this.map);this.markers.push({type:"location",marker:l,location:t,index:e}),l.getElement().addEventListener("click",()=>{const L={features:[{geometry:{coordinates:t.geometry.coordinates},properties:t.properties}],lngLat:{lng:t.geometry.coordinates[0],lat:t.geometry.coordinates[1]}};this.handleMarkerClick(L)})}handleMarkerClick(t){const e=new CustomEvent("markerClick",{detail:t});document.dispatchEvent(e)}showPopup(t){const e=t.features[0].geometry.coordinates.slice(),s=t.features[0].properties.description;for(;Math.abs(t.lngLat.lng-e[0])>180;)e[0]+=t.lngLat.lng>e[0]?360:-360;this.popup.setLngLat(e).setHTML(s).addTo(this.map)}hidePopup(){this.popup.remove()}clearMapPoints(){const t=g.layerSettings.id;this.map.getLayer(t)&&this.map.removeLayer(t),this.map.getSource(t)&&this.map.removeSource(t),this.markers.filter(e=>e.type==="location").forEach(e=>e.marker.remove()),this.markers=this.markers.filter(e=>e.type==="user")}clearAllMarkers(){this.markers.forEach(t=>t.marker.remove()),this.markers=[],this.hidePopup()}getLocationMarkers(){return this.markers.filter(t=>t.type==="location")}getUserMarkers(){return this.markers.filter(t=>t.type==="user")}getMapLocations(){return this.mapLocations}setupHoverEvents(){this.markers.filter(t=>t.type==="location").forEach(t=>{const e=t.marker.getElement();e.addEventListener("mouseenter",()=>{this.map.getCanvas().style.cursor="pointer";const s={features:[{geometry:{coordinates:t.location.geometry.coordinates},properties:t.location.properties}],lngLat:{lng:t.location.geometry.coordinates[0],lat:t.location.geometry.coordinates[1]}};this.showPopup(s)}),e.addEventListener("mouseleave",()=>{this.map.getCanvas().style.cursor="",this.hidePopup()})})}}class b{static setMapInstance(t){b._mapInstance=t}static setupEventListeners(){document.addEventListener("click",e=>{if(e.target.classList.contains("close-list")){const s=document.getElementById("location-list");s&&s.classList.remove("active")}});const t=document.querySelector(".close-block");t&&t.addEventListener("click",()=>{const e=document.querySelector(".locations-map_wrapper");e&&e.classList.remove("is--show")}),document.addEventListener("click",e=>{if(e.target.closest(".close-block")){const o=document.querySelector(".locations-map_wrapper");o&&o.classList.remove("is--show")}})}}class B{constructor(){this.map=null,this.userLocation=null,this.markerManager=null,this.styleManager=null,this.searchBox=null,this.initializeMap()}initializeMap(){u.accessToken=g.accessToken;const t=document.getElementById("map");if(!t)throw new Error("Map container #map not found in the DOM");this.ensureContainerDimensions(t);try{this.map=new u.Map(g.defaultMapSettings),this.initializeManagers(),this.setupMapControls(),this.setupEventListeners()}catch(e){throw e}}ensureContainerDimensions(t){(t.offsetWidth===0||t.offsetHeight===0)&&(t.style.width="100%",t.style.height="100vh")}initializeManagers(){this.markerManager=new I(this.map),this.styleManager=new P(this.map),this.styleManager.applyCustomStyling(),this.initializeSearchBox()}setupMapControls(){b.setMapInstance(this.map),this.map.addControl(new u.NavigationControl),this.map.addControl(new u.FullscreenControl),this.map.addControl(new z);const t=new u.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0});this.map.addControl(t)}setupEventListeners(){this.map.on("style.load",()=>{}),this.map.on("load",()=>{this.initializeUserLocation()}),this.map.on("error",t=>{}),document.addEventListener("markerClick",t=>{this.handleLocationClick(t.detail)}),this.map.on("wheel",t=>{const e=t.originalEvent;e.ctrlKey||e.metaKey||e.altKey?this.map.scrollZoom.enable():(this.map.scrollZoom.disable(),this.showZoomHint())}),b.setupEventListeners()}async initializeUserLocation(){try{this.userLocation=await x.getUserLocation(),this.markerManager.loadLocationData(),this.flyToLocation(),this.markerManager.addUserLocationMarker(this.userLocation),this.markerManager.addMapPoints(),this.markerManager.setupHoverEvents()}catch{this.markerManager.loadLocationData(),this.markerManager.addMapPoints(),this.markerManager.setupHoverEvents(),this.styleManager.setupCountryZoom()}}flyToLocation(){this.map.flyTo({center:[this.userLocation.lng,this.userLocation.lat],zoom:this.userLocation.isDefault?13:16,essential:!0,duration:2e3})}async handleLocationClick(t){const e=t.features[0].properties.arrayID;this.markerManager.showPopup(t),this.updateLocationUI(e),this.map.easeTo({center:t.features[0].geometry.coordinates,speed:.5,curve:1,duration:1e3})}updateLocationUI(t){const e=document.getElementById("location-list");e&&e.classList.add("active");const s=document.querySelector(".locations-map_wrapper");s&&s.classList.add("is--show"),document.querySelectorAll(".locations-map_item.is--show").forEach(r=>r.classList.remove("is--show"));const o=document.querySelectorAll(".locations-map_item");o[t]&&o[t].classList.add("is--show")}showZoomHint(){console.log("Use Ctrl + Scroll to zoom the map.")}initializeSearchBox(){const t=document.getElementById("search-js");t&&(t.addEventListener("load",()=>{this.setupSearchBox()}),window.mapboxsearch&&this.setupSearchBox())}setupSearchBox(){try{if(!window.mapboxsearch){console.warn("Mapbox search not available");return}this.searchBox=new window.mapboxsearch.MapboxSearchBox,this.searchBox.accessToken=g.accessToken,this.searchBox.options={language:"en",country:"NA",proximity:[17.08,-22.57],limit:5},this.searchBox.mapboxgl=u,this.searchBox.marker=!0,this.searchBox.flyTo=!0,this.searchBox.bindMap(this.map),this.map.addControl(this.searchBox,"top-right")}catch(t){console.error("Error setting up search box:",t)}}getSearchBox(){return this.searchBox}getMarkerManager(){return this.markerManager}getStyleManager(){return this.styleManager}getMap(){return this.map}getUserLocation(){return this.userLocation}clearMarkers(){this.markerManager.clearAllMarkers()}resetMap(){this.clearMarkers(),this.styleManager.resetStyling()}}var A="";function E(a){window.Webflow&&window.Webflow.push?window.Webflow.push(a):setTimeout(()=>E(a),100)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{E(()=>{T()})}):E(()=>{T()});function T(){try{document.getElementById("map")&&new B,C()}catch{}try{N()}catch{}}});
